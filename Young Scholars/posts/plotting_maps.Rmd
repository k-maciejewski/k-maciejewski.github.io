---
title: "Plotting Maps"
author: "Young Scholars Program"
date: "02"
output:
  html_document:
    df_print: paged
    theme: flatly
    toc: yes
    toc_float: yes
  word_document:
    toc: yes
  cache: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(maps)
library(usmap)
library(ggplot2)
library(tidyverse)
library(plotly)
  
# load data
  # unemp includes data for some counties not on the "lower 48 states" county
  # map, such as those in Alaska, Hawaii, Puerto Rico, and some tiny Virginia
  #  cities
  data(unemp)
  unemp$colorBuckets <- as.numeric(cut(unemp$unemp, c(0, 2, 4, 6, 8, 10, 100)))
  data(statepop)
```

We'll learn some methods to plot data onto maps of the US, how to make them interactive, and eventually how to create dashboards for the maps.

## usmap::plot_usmap()

## Conveniently plot basic US map

### Description

Conveniently plot basic US map

### Usage

    plot_usmap(
      regions = c("states", "state", "counties", "county"),
      include = c(),
      exclude = c(),
      data = data.frame(),
      values = "values",
      theme = theme_map(),
      labels = FALSE,
      label_color = "black",
      ...
    )

```{r}
plot_usmap() # plot the US

plot_usmap(regions = "counties") + # pecify what to map
  labs(title = "US Counties", # add some ggplot stuffs
       subtitle = "This is a blank map of the counties of the United States.") + 
  theme(panel.background = element_rect(color = "black", fill = "lightblue"))

plot_usmap(data = unemp, # specify dataset to use (uses region info from dataset)
           values = "colorBuckets", # name of column to fill map (as string)
           theme = theme_dark()) # change theme

plot_usmap(include = "CA", # show only CA
           data = unemp, 
           values = "colorBuckets", 
           theme = theme_dark()) 

plot_usmap(data = statepop, 
           values = "pop_2015") +
  scale_fill_continuous(low = "white", high = "red", # define high and low colors
                        name = "Population (2015)", # name of legend
                        label = scales::comma) + # use commas in scale
  theme(legend.position = "right") # add on ggplot theme components

# we can wrap any of these in ggplotly to make them interactive
ggplotly(plot_usmap(data = statepop, 
           values = "pop_2015") +
  scale_fill_continuous(low = "white", high = "red", 
                        name = "Population (2015)", 
                        label = scales::comma) + 
  theme(legend.position = "right")) 

# or, save the plot ana apply ggplotly
p <- plot_usmap(data = statepop, 
           values = "pop_2015") +
  scale_fill_continuous(low = "white", high = "red", 
                        name = "Population (2015)", 
                        label = scales::comma) + 
  theme(legend.position = "right")
ggplotly(p)
```
